
# Customer Churn Prediction

A straightforward web application for predicting customer churn using machine learning. Built with Next.js and scikit-learn.

## Deployemnt Server
https://churn-app.netlify.app/

## Overview

This app predicts whether a customer is likely to churn (leave) based on their telco service usage patterns. The model is trained on the Telco Customer Churn dataset and deployed as a simple, interactive web interface.

## Project Structure

\`\`\`
├── app/
│   ├── api/
│   │   ├── model/route.ts       # API endpoint to fetch model metadata
│   │   └── predict/route.ts     # API endpoint for churn predictions
│   ├── page.tsx                 # Main page
│   ├── layout.tsx               # Root layout
│   └── globals.css              # Global styles
├── components/
│   ├── churn-form.tsx           # Form for customer input
│   ├── result-panel.tsx         # Result display panel
│   ├── churn-console.tsx        # Main console component
│   └── interactive-background.tsx # Interactive background
├── lib/
│   └── model.ts                 # Model utilities and feature encoding
├── public/
│   └── models/
│       └── churn-model.json     # Trained model (generated by training script)
└── scripts/
    └── train_churn_model.py     # Python script to train the model
\`\`\`

## Setup

### 1. Install Dependencies

\`\`\`bash
npm install
\`\`\`

### 2. Train the Model

The model must be trained before the app can make predictions. Run the training script:

\`\`\`bash
python scripts/train_churn_model.py
\`\`\`

**Options:**
- Use remote CSV (default): `python scripts/train_churn_model.py`
- Use local CSV: `python scripts/train_churn_model.py --input Telco-Customer-Churn.csv`
- Specify output path: `python scripts/train_churn_model.py --output public/models/churn-model.json`

**Requirements:**
- Python 3.7+
- pandas, scikit-learn, numpy, requests

Install Python dependencies:
\`\`\`bash
pip install pandas scikit-learn numpy requests
\`\`\`

### 3. Verify Model Creation

After running the training script, confirm the model exists at:
\`\`\`
public/models/churn-model.json
\`\`\`

### 4. Run the App

\`\`\`bash
npm run dev
\`\`\`

Open [http://localhost:3000](http://localhost:3000) in your browser.

## Usage

1. Fill in the customer information form with telco service details.
2. Click "Predict" to get a churn probability.
3. The result displays as a percentage in the compact result box next to the form.

## Model Details

- **Algorithm:** Logistic Regression
- **Features:** 19 customer attributes (tenure, charges, services, contract type, etc.)
- **Target:** Binary classification (Churn: Yes/No)
- **Data Source:** Telco Customer Churn dataset

## API Endpoints

### GET `/api/model`
Returns model metadata including feature names, categories, and encoding mappings.

**Response:**
\`\`\`json
{
  "features": ["gender", "SeniorCitizen", ...],
  "categories": { "gender": ["Male", "Female"], ... },
  "encodings": { "gender": { "Male": 0, "Female": 1 }, ... }
}
\`\`\`

### POST `/api/predict`
Predicts churn probability for a customer.

**Request Body:**
\`\`\`json
{
  "gender": "Male",
  "SeniorCitizen": 0,
  "Partner": "No",
  ...
}
\`\`\`

**Response:**
\`\`\`json
{
  "churnProbability": 0.35,
  "prediction": "No"
}
\`\`\`

## Troubleshooting

**Model not found error:**
- Ensure the training script ran successfully and created `public/models/churn-model.json`.
- Run the script from the project root directory.
- Check that Python dependencies are installed.

**Form not loading:**
- Verify `/api/model` returns valid metadata by visiting it in your browser.
- Check browser console for errors.

**Prediction errors:**
- Ensure all required fields are filled in the form.
- Verify the model JSON is valid and not corrupted.

## Deployment

To deploy to Vercel:

1. Push your code to GitHub.
2. Connect your repository to Vercel.
3. Ensure the training script has been run locally and `public/models/churn-model.json` is committed to your repository.
4. Deploy!

## License

MIT
